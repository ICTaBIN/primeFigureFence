{% extends "base-templates/base-fence.html" %}
{% load static %}

{% block title %}Iron Fence{% endblock %}

{% block styles %}
<link rel="https://cdnjs.cloudflare.com/ajax/libs/inter/3.19.3/inter.css" rel="stylesheet">
<link href="{% static 'css/iron-fence.css' %}" rel="stylesheet">
{% endblock %}

{% block heading %}Iron Fence{% endblock %}

{% block scripts %}

 <script src="{% static 'js/resize.js' %}"></script>


<script src="{% static 'js/drawing.js' %}"></script>
<script src="{% static 'js/iron-fence.js' %}"></script>
<script type="module" src="{% static 'js/templates.js' %}"></script>


<script>
    // Define variables to keep track of quantities
    var PanelsQty = 0;
    var PostsQty = 0;
    var BracketsQty = 0;
    var GatesQty = 0;
    var GateHardwareQty = 0;

    // Function to handle price updates based on dropdown selection
    function updatePrice(selectElement) {
        var selectedOption = selectElement.options[selectElement.selectedIndex];
        var material = selectedOption.getAttribute('material-type');
        var price = parseFloat(selectedOption.getAttribute('material-price')) || 0;

        console.log(`Material: ${material}, Price: ${price}`);

        // Update the price display element
        document.getElementById(`${material}Price`).textContent = '$' + price.toFixed(2);

        // Calculate total using the respective quantity
        var quantity = eval(`${material}Qty`) || 0; // Access the respective quantity variable
        document.getElementById(`${material}Total`).textContent = '$' + (price * quantity).toFixed(2);
    }

    // Function to handle quantity changes
    function qtyChange(element) {
        var quantity = parseInt(element.value) || 0; // Default to 0 if invalid
        console.log("Quantity changed to:", quantity);

        // Update the respective quantity variable
        if (element.id === "PanelsQty") PanelsQty = quantity;
        if (element.id === "PostsQty") PostsQty = quantity;
        if (element.id === "BracketsQty") BracketsQty = quantity;
        if (element.id === "GatesQty") GatesQty = quantity;
        if (element.id === "GateHardwareQty") GateHardwareQty = quantity;

        // Extract material type from the element's ID
        var material = element.id.replace("Qty", "");

        // Get the price for the material
        var price = parseFloat(document.getElementById(`${material}Price`).textContent.replace('$', '')) || 0;

        console.log(`Material: ${material}, Price: ${price}, Quantity: ${quantity}`);

        // Update the total price for the material
        document.getElementById(`${material}Total`).textContent = '$' + (quantity * price).toFixed(2);
    }
</script>




{% endblock %}